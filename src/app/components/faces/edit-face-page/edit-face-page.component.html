<mat-spinner *ngIf="isLoading" [diameter]="50"></mat-spinner>

<mat-card class="form">
  <form class="form-fields"
        novalidate
        [formGroup]="myEditForm">
    <div class="form-fields__name offline-disabled"
         [class.disabled]="isOffline"
    >
      <mat-form-field appearance="outline">
        <mat-label>First Name</mat-label>

        <input matInput
               type="text"
               formControlName="firstName"
               required
               maxlength="255">

        <mat-icon matSuffix>edit_note</mat-icon>

        <mat-hint *ngIf="myEditForm.controls['firstName'].invalid && myEditForm.controls['firstName'].touched">
          Name field not filled
        </mat-hint>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Last Name</mat-label>

        <input matInput
               type="text"
               formControlName="lastName"
               required
               maxlength="255">

        <mat-icon matSuffix>edit_note</mat-icon>

        <mat-hint *ngIf="myEditForm.controls['lastName'].invalid && myEditForm.controls['lastName'].touched">
          Last NameLast Name field not filled
        </mat-hint>
      </mat-form-field>
    </div>

    <div class="form-fields__group-radio offline-disabled"
         [class.disabled]="isOffline"
    >
      <mat-form-field appearance="outline">
        <mat-label>Birthe Date</mat-label>
        <input matInput
               formControlName="birthedAt"
               required
               [matDatepicker]="picker">
        <mat-hint *ngIf="myEditForm.controls['birthedAt'].invalid && myEditForm.controls['birthedAt'].touched">
          Date field not filled
        </mat-hint>
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
      </mat-form-field>

      <mat-radio-group class="form-fields__group-label"
                       aria-labelledby="example-radio-group-label"
                       formControlName="gender"
                       required
                       color="primary">
        <mat-radio-button *ngFor="let gender of genders" [value]="gender">
          {{ gender }}
        </mat-radio-button>
      </mat-radio-group>
    </div>

    <div class="form-fields__address offline-disabled"
         [class.disabled]="isOffline"
    >
      <mat-form-field appearance="outline">
        <mat-label>Country</mat-label>

        <input matInput type="text"
               placeholder="country"
               formControlName="country"
               required
               maxlength="255">

        <mat-icon matSuffix>edit_note</mat-icon>

        <mat-hint *ngIf="myEditForm.controls['country'].invalid && myEditForm.controls['country'].touched">
          Country field not filled
        </mat-hint>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>City</mat-label>

        <input matInput type="text"
               placeholder="city"
               formControlName="city"
               required
               maxlength="255">

        <mat-icon matSuffix>edit_note</mat-icon>

        <mat-hint *ngIf="myEditForm.controls['city'].invalid && myEditForm.controls['city'].touched">
          City field not filled
        </mat-hint>
      </mat-form-field>
    </div>

    <div class="form-fields__avatar offline-disabled"
         [class.disabled]="isOffline"
    >
      <img [src]="myEditForm.controls['avatarUrl'].value"/>
      <div>
        <input #csvInput
               hidden="true"
               name="avatarUrl"
               type="file"
               accept="image/*"
               required
               (change)="handleInputChange($event)"/>

        <button class="form-fields__avatar-button"
                type="button"
                mat-stroked-button
                color="primary"
                (click)="csvInput.click()">
          Choose File
        </button>
      </div>
    </div>

    <mat-form-field class="field-textareaOffline-disabled"
                    appearance="fill"
                    [class.disabled]="isOffline"
    >

        <textarea type="text"
                  formControlName="story"
                  required
                  maxlength="1000"
                  matInput
                  style="min-height: 100px"
        >
        </textarea>
    </mat-form-field>

    <button class="form-fields__button" mat-flat-button color="primary" [disabled]="myEditForm.invalid || isOffline"
            (click)="onUpdateClick()">
      confirm the changes and return to the page
    </button>
  </form>
</mat-card>
